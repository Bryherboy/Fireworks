<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Kids' Doodle Pad</title>
    <!-- Load Tailwind CSS for modern, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Set the body and HTML to full height for mobile-friendly layout */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* Prevent scrolling of the whole page */
            font-family: 'Inter', sans-serif;
        }

        /* Ensure the canvas fills the available space */
        #drawingCanvas {
            touch-action: none; /* Prevents default browser actions like scrolling/zooming on the canvas */
            cursor: crosshair;
        }
        
        /* Custom size styles for brush buttons */
        .brush-size-button {
            transition: all 0.1s;
        }
        .brush-size-button.active {
            box-shadow: 0 0 0 4px #4F46E5, 0 0 10px rgba(0, 0, 0, 0.5); /* Deep purple ring and shadow */
            transform: scale(1.1);
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col h-full">

    <!-- Drawing Area - This now comes first and uses flex-grow to push controls to the bottom -->
    <div class="flex-grow">
        <canvas id="drawingCanvas" class="w-full h-full bg-white"></canvas>
    </div>

    <!-- Controls Area - Moved to the bottom of the body structure -->
    <div class="p-3 bg-white shadow-2xl border-t-4 border-indigo-300 flex flex-wrap justify-center items-center gap-3">
        <h1 class="text-xl font-extrabold text-indigo-600 mr-4 hidden sm:block">Doodle Fun!</h1>

        <!-- Color Selectors -->
        <div id="colorControls" class="flex gap-3">
            <button data-color="#EF4444" class="color-btn w-12 h-12 rounded-full bg-red-500 shadow-md ring-2 ring-transparent transition active:ring-4 active:ring-red-300" title="Red"></button>
            <button data-color="#3B82F6" class="color-btn w-12 h-12 rounded-full bg-blue-500 shadow-md ring-2 ring-transparent transition active:ring-4 active:ring-blue-300" title="Blue"></button>
            <button data-color="#F59E0B" class="color-btn w-12 h-12 rounded-full bg-yellow-500 shadow-md ring-2 ring-transparent transition active:ring-4 active:ring-yellow-300" title="Yellow"></button>
        </div>

        <!-- Brush Size Selectors -->
        <div id="sizeControls" class="flex gap-4 border-l pl-4 ml-4 border-gray-200">
            <button data-size="10" class="brush-size-button w-12 h-12 rounded-full bg-gray-600 flex items-center justify-center p-2" title="Small Brush">
                <div class="w-3 h-3 rounded-full bg-white"></div>
            </button>
            <button data-size="25" class="brush-size-button active w-12 h-12 rounded-full bg-gray-600 flex items-center justify-center p-2" title="Large Brush">
                <div class="w-6 h-6 rounded-full bg-white"></div>
            </button>
        </div>

        <!-- Eraser Button -->
        <button id="clearBtn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition duration-200 active:scale-95 border-l pl-4 ml-4 border-gray-200" title="Clear Screen">
            Full Eraser
        </button>
    </div>

    <script>
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        
        let isDrawing = false;
        let currentColor = '#F59E0B'; // Default to Yellow
        let brushSize = 25;           // Default to large

        // --- Setup and Sizing ---

        /**
         * Resizes the canvas to fill the entire parent container.
         * We update the canvas element's attributes and the CSS to ensure it's responsive.
         */
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }

        // Set the initial size and handle resizing
        window.addEventListener('load', resizeCanvas);
        window.addEventListener('resize', resizeCanvas);
        
        // Initial setup for the context
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = brushSize;


        // --- Drawing Logic ---

        /**
         * Gets the coordinates of the pointer (mouse or touch) relative to the canvas.
         * @param {Event} event - The mouse or touch event object.
         * @returns {{x: number, y: number}} - The coordinates.
         */
        function getPointerPos(event) {
            const rect = canvas.getBoundingClientRect();
            let clientX, clientY;

            // Handle touch events
            if (event.touches && event.touches.length > 0) {
                clientX = event.touches[0].clientX;
                clientY = event.touches[0].clientY;
            } 
            // Handle mouse events
            else {
                clientX = event.clientX;
                clientY = event.clientY;
            }

            return {
                x: clientX - rect.left,
                y: clientY - rect.top
            };
        }

        /**
         * Starts the drawing path.
         */
        function startDrawing(event) {
            event.preventDefault(); // Prevent scrolling/default behaviors
            isDrawing = true;
            const pos = getPointerPos(event);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
            ctx.strokeStyle = currentColor;
            ctx.lineWidth = brushSize;
        }

        /**
         * Draws the line segment.
         */
        function draw(event) {
            if (!isDrawing) return;
            event.preventDefault(); // Prevent scrolling/default behaviors
            const pos = getPointerPos(event);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            // This is crucial for continuous lines on high-speed moves
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        /**
         * Stops the drawing path.
         */
        function stopDrawing() {
            isDrawing = false;
            ctx.closePath();
        }

        // Mouse Events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // Touch Events
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchcancel', stopDrawing);


        // --- UI Control Handlers ---

        /**
         * Handles color button clicks.
         */
        document.getElementById('colorControls').addEventListener('click', (e) => {
            const btn = e.target.closest('.color-btn');
            if (btn && btn.dataset.color) {
                currentColor = btn.dataset.color;
                // Update visual feedback for active color
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('ring-4', 'ring-indigo-500'));
                btn.classList.add('ring-4', 'ring-indigo-500'); 
            }
        });

        /**
         * Handles brush size button clicks.
         */
        document.getElementById('sizeControls').addEventListener('click', (e) => {
            const btn = e.target.closest('.brush-size-button');
            if (btn && btn.dataset.size) {
                brushSize = parseInt(btn.dataset.size);
                // Update the visual active state
                document.querySelectorAll('.brush-size-button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            }
        });

        /**
         * Handles the clear/eraser button click.
         */
        document.getElementById('clearBtn').addEventListener('click', () => {
            // Fill the entire canvas with the background color (white)
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            // Show a temporary success message/animation
            const originalText = document.getElementById('clearBtn').textContent;
            document.getElementById('clearBtn').textContent = 'CLEARED!';
            document.getElementById('clearBtn').classList.remove('bg-red-600', 'hover:bg-red-700');
            document.getElementById('clearBtn').classList.add('bg-green-600');
            setTimeout(() => {
                document.getElementById('clearBtn').textContent = originalText;
                document.getElementById('clearBtn').classList.remove('bg-green-600');
                document.getElementById('clearBtn').classList.add('bg-red-600', 'hover:bg-red-700');
            }, 750);
        });

        // Initialize the appearance for the default color and size
        window.addEventListener('load', () => {
            // Initial clear to ensure a fresh start
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Set default active color button ring
            const defaultColorButton = document.querySelector(`.color-btn[data-color="${currentColor}"]`);
            if (defaultColorButton) {
                defaultColorButton.classList.add('ring-4', 'ring-indigo-500');
            }
        });
    </script>
</body>
</html>

